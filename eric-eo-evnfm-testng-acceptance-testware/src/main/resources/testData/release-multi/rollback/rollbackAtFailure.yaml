#
# COPYRIGHT Ericsson 2024
#
#
#
# The copyright to the computer program(s) herein is the property of
#
# Ericsson Inc. The programs may be used and/or copied only with written
#
# permission from Ericsson Inc. or in accordance with the terms and
#
# conditions stipulated in the agreement/contract under which the
#
# program(s) have been supplied.
#

cnfToInstantiate:
  - vnfdId: "multi-chart-477c-aab3-2b04e6a383"
    vnfInstanceName: rollback-fail-specific-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-fail-specific-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: Completed
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    additionalParams:
      config.nbi.file.enabled: false
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: false
      tags.pm: true
      tags.all: false
      eric-pm-server.enabled: false
      retrieveUnsealKey: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
      rollback-failure.param1: additional-param
      rollback-failure.param3: []
    valuesFilePart:
      rollback-failure:
        param1: values-param1
        param2: values-param2
        param3: [ "list1", "list2", "list3" ]
    expectedHelmValues:
      rollback-failure:
        param1: additional-param
        param2: values-param2
        param3: []
    expectedHelmHistory:
      test-scale-chart:
        - revision: "1"
          description: Install complete
        - revision: "2"
          description: Upgrade complete
      spider-app:
        - revision: "1"
          description: Install complete
  - vnfdId: "multi-chart-477c-aab3-2b04e6a383"
    vnfInstanceName: rollback-fail-generic-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-fail-generic-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: Completed
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    additionalParams:
      config.nbi.file.enabled: false
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: false
      tags.pm: true
      tags.all: false
      eric-pm-server.enabled: false
      retrieveUnsealKey: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
      rollback-failure.param1: additional-param
      rollback-failure.param3: []
    valuesFilePart:
      rollback-failure:
        param1: values-param1
        param2: values-param2
        param3: [ "list1", "list2", "list3" ]
    expectedHelmValues:
      rollback-failure:
        param1: additional-param
        param2: values-param2
        param3: []
    expectedHelmHistory:
      test-scale-chart:
        - revision: "1"
          description: Install complete
        - revision: "2"
          description: Upgrade complete
        - revision: "3"
          description: Rollback to 1
      spider-app:
        - revision: "1"
          description: Install complete
  - vnfdId: "multi-chart-etsi-rel4-5fcb086597"
    vnfInstanceName: rollback-failure-no-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-failure-no-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: Completed
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    additionalParams:
      config.nbi.file.enabled: false
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: false
      global.security.tls.enabled: false
      tags.pm: true
      tags.all: false
      eric-pm-server.enabled: false
      retrieveUnsealKey: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
      rollback-success.param1: additional-param
    valuesFilePart:
      rollback-success:
        param1: values-param1
        param2: values-param2
        param3: ["list1", "list2", "list3"]
    expectedHelmValues:
      rollback-success:
        param1: additional-param
        param2: values-param2
        param3: ["list1", "list2", "list3"]
    expectedHelmHistory:
      test-scale-chart:
        - revision: "1"
          description: Install complete
        - revision: "2"
          description: Upgrade complete
        - revision: "3"
          description: Rollback to 1
      spider-app:
        - revision: "1"
          description: Install complete
        - revision: "2"
          description: |
            Upgrade "<vnfInstanceName>-2" failed: failed to create resource: Deployment in version "v1" cannot be handled as a Deployment: json: cannot unmarshal string into Go struct field Probe.spec.template.spec.containers.livenessProbe.initialDelaySeconds of type int32
        - revision: "3"
          description: Rollback to 1

cnfToUpgrade:
  - vnfdId: "multi-chart-569d-xyz3-5g15f7h499"
    vnfInstanceName: rollback-fail-specific-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-fail-specific-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: FAILED_TEMP
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    applicationTimeout: 600
    additionalParams:
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: true
      persistScaleInfo: true
      tags.pm: true
      tags.all: false
      pm-testapp.ingress.domain: <fail>
      eric-adp-gs-testapp.tls.dced.enabled: false
      eric-adp-gs-testapp.ingress.enabled: true
      eric-adp-gs-testapp.service.replicaCount: 1
      upgrade.downsize.allowed: true
      config.nbi.file.enabled: false
      eric-pm-server.enabled: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
    valuesFilePart:
      rollback-failure:
        param1: additional-param
        param2: values-param2
        param3: []
    expectedHelmValues:
      rollback-failure:
        param1: additional-param
        param2: values-param2
        param3: []
  - vnfdId: "multi-chart-etsi-rel4-b-455379754e37"
    vnfInstanceName: rollback-fail-generic-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-fail-generic-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: FAILED_TEMP
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    applicationTimeout: 600
    additionalParams:
      persistScaleInfo: true
      tags.pm: true
      tags.all: false
      pm-testapp.ingress.domain: <fail>
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: true
      eric-adp-gs-testapp.tls.dced.enabled: false
      eric-adp-gs-testapp.ingress.enabled: true
      eric-adp-gs-testapp.service.replicaCount: 1
      upgrade.downsize.allowed: true
      config.nbi.file.enabled: false
      eric-pm-server.enabled: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
    valuesFilePart:
      rollback-failure: []
  - vnfdId: "multi-chart-etsi-rel4-b-455379754e37-mixed_vdu"
    vnfInstanceName: rollback-failure-no-pattern
    vnfInstanceDescription: Example description
    namespace: rollback-failure-no-pattern-multi-ns
    cluster:
      localPath: "${KUBE_CONFIG_PATH}"
    expectedOperationState: FAILED_TEMP
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    applicationTimeout: 600
    additionalParams:
      persistScaleInfo: true
      tags.pm: true
      tags.all: false
      eric-adp-gs-testapp.tls.dced.enabled: false
      influxdb-service.enabled: false
      eric-pm-bulk-reporter.enabled: false
      eric-adp-gs-testapp.enabled: true
      global.security.tls.enabled: false
      eric-adp-gs-testapp.livenessProbe.initialDelaySeconds: abc
      eric-adp-gs-testapp.ingress.enabled: true
      eric-adp-gs-testapp.service.replicaCount: 1
      upgrade.downsize.allowed: true
      config.nbi.file.enabled: false
      eric-pm-server.enabled: false
      backup-controller.enabled: false
      bro.ingress.enabled: false
      global.hosts.bro: bro.test.hahn061.rnd.gic.ericsson.se
      rollback-success.param1.enabled: false
      rollback-success.param2: additional-param-override
      rollback-success.param4.key1: additional-value1
    extensions:
      deployableModules:
        depModule_cnf1: enabled
        depModule_cnf2: enabled
        deployable_mdl_cnf1_crd1: disabled
    valuesFilePart:
      rollback-success:
        param4:
          key1: value1
          key2: value2
    expectedHelmValues:
      rollback-success:
        param1:
          enabled: false
        param2: additional-param-override
        param3: ["list1", "list2", "list3"]
        param4:
          key1: additional-value1
          key2: value2