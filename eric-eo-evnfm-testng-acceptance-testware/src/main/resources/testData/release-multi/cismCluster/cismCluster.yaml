#
# COPYRIGHT Ericsson 2024
#
#
#
# The copyright to the computer program(s) herein is the property of
#
# Ericsson Inc. The programs may be used and/or copied only with written
#
# permission from Ericsson Inc. or in accordance with the terms and
#
# conditions stipulated in the agreement/contract under which the
#
# program(s) have been supplied.
#

packages:
  - packageName: "https://arm1s11-eiffel052.eiffel.gic.ericsson.se:8443/nexus/service/local/repositories/evnfm_testing_artifacts/content/tosca_1_2/SOL_2_5_1/basic/basic-app-b/basic-app-b/1.0.4/basic-app-b-1.0.4.csar"
    vnfdId: 8eca7b35-72d8-4cab-9fee-138f1c3b9cacc
    skipImageUpload: true
    timeOut: 10
    packageSecurityOption: UNSIGNED

cnfToInstantiate:
  - vnfdId: 8eca7b35-72d8-4cab-9fee-138f1c3b9caaa
    vnfInstanceName: cism-cluster
    namespace: cism-cluster-multi-ns
    expectedOperationState: Completed
    expectedComponentsState: Running
    cleanUpResources: true
    skipVerification: false
    pods: [ busybox ]
  - vnfdId: 8eca7b35-72d8-4cab-9fee-138f1c3b9caaa
    vnfInstanceName: cism-cluster-negative
    namespace: cism-cluster-negative-multi-ns
    expectedOperationState: FAILED
    cleanUpResources: false
    skipVerification: false
    additionalParams:
      updateStrategy.rollingUpdate.maxUnavailable: abc

cnfToUpgrade:
  vnfdId: 8eca7b35-72d8-4cab-9fee-138f1c3b9cacc
  vnfInstanceDescription: Example description
  vnfInstanceName: cism-cluster
  namespace: cism-cluster-multi-ns
  expectedOperationState: Completed
  expectedComponentsState: Running
  cleanUpResources: true
  skipVerification: false
  applicationTimeout: 600

clusterConfigs:
  validConfig:
    localPath: "${EXTERNAL_KUBE_CONFIG_PATH:-hahn062.config}"
    description: "Valid cluster config pointing to external cluster"
  # following cluster configs are generated by CISMClustersDataProviders
  # class based on validClusterConfig therefore localPath field is filled after
  # these configs are loaded
  invalidConfig:
    description: "Invalid cluster config pointing to external cluster"
  configWithExistingNamespace:
    description: "Valid cluster config pointing to external cluster with existing namespace"
    namespace: "existing-namespace"
    createNamespace: true

expectedErrors:
  notValid:
    type: "about:blank"
    title: "Cluster config file not valid."
    status: 400
    detail: "An error occurred during validating cluster config: Connectivity test failed, please check your connection to the target cluster: java.net.UnknownHostException: %s: Name or service not known"
    instance: "about:blank"
  alreadyExists:
    type: "about:blank"
    title: "Cluster failed to register."
    status: 409
    detail: "File with name %s already exists."
    instance: "about:blank"
  notExistingNamespace:
    type: "about:blank"
    title: "Cluster config file not valid."
    status: 400
    detail: "An error occurred during validating cluster config: The namespace '%s' doesn't exist on the environment, please create it before applying current cluster configuration or delete field 'namespace' from the configuration file"
    instance: "about:blank"
  notFoundConfig:
    type: "about:blank"
    title: "Not Found Exception"
    status: 404
    detail: "Cluster config file %s not found"
    instance: "about:blank"
  defaultConfigDeregistration:
    type: "about:blank"
    title: "Cluster operation failed."
    status: 409
    detail: "Default cluster config can not be deregister."
    instance: "about:blank"
  notExistConfig:
    type: "about:blank"
    title: "Cluster config file does not exist."
    status: 404
    detail: "Cluster config file %s does not exist."
    instance: "about:blank"
  requiredNamespacesMissing:
    type: "about:blank"
    title: "Required namespaces missing"
    status: 400
    detail: "Following VNF namespaces are missing on cluster: %s.*$"
    instance: "about:blank"
  notValid(update):
    type: "about:blank"
    title: "Cluster config file not valid."
    status: 400
    detail: "An error occurred during validating cluster config: Connectivity test failed, please check your connection to the target cluster: java.net.UnknownHostException: %s: Name or service not known"
    instance: "about:blank"
  notValid(patch):
    type: "about:blank"
    title: "Cluster config file not valid."
    status: 400
    detail: "An error occurred during validating cluster config: %s.*$"
    instance: "about:blank"
  descriptionLengthExceeded:
    type: "about:blank"
    title: "Bad Request"
    status: 400
    detail: "description size must be between 0 and 250"
    instance: "about:blank"